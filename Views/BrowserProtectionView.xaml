<Page x:Class="SkidrowKiller.Views.BrowserProtectionView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{StaticResource BgPrimaryBrush}">

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Browser Protection"
                       FontSize="28" FontWeight="Bold"
                       Foreground="{StaticResource TextPrimaryBrush}"/>
            <TextBlock Text="Protect your browsers from malicious extensions and hijacked settings"
                       FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,4,0,0"/>
        </StackPanel>

        <!-- Browser Cards -->
        <ItemsControl x:Name="BrowsersList" Grid.Row="1" Margin="0,0,0,20">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Border Background="{StaticResource BgCardBrush}"
                            CornerRadius="8" Padding="16" Margin="0,0,12,12" Width="200">
                        <StackPanel>
                            <TextBlock Text="{Binding Name}" FontSize="16" FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimaryBrush}"/>
                            <TextBlock Text="{Binding Type}" FontSize="12"
                                       Foreground="{StaticResource TextSecondaryBrush}" Margin="0,4,0,0"/>
                            <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                <Ellipse Width="8" Height="8" Fill="{StaticResource SuccessBrush}"
                                         VerticalAlignment="Center" Margin="0,0,6,0"/>
                                <TextBlock Text="Detected" FontSize="11"
                                           Foreground="{StaticResource SuccessBrush}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <!-- Scan Results -->
        <Border Grid.Row="2" Background="{StaticResource BgCardBrush}" CornerRadius="8" Padding="16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,12">
                    <TextBlock Text="Scan Results" FontSize="16" FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                    <TextBlock x:Name="ResultsCount" Text="" FontSize="12"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               VerticalAlignment="Center" Margin="12,0,0,0"/>
                </StackPanel>

                <!-- Empty State -->
                <StackPanel x:Name="EmptyState" Grid.Row="1"
                            VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="No scan results yet" FontSize="14"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="Click 'Scan Browsers' to check for threats" FontSize="12"
                               Foreground="{StaticResource TextTertiaryBrush}"
                               HorizontalAlignment="Center" Margin="0,4,0,0"/>
                </StackPanel>

                <!-- Results List -->
                <ScrollViewer x:Name="ResultsScroll" Grid.Row="1"
                              VerticalScrollBarVisibility="Auto" Visibility="Collapsed"
                              Style="{StaticResource ModernScrollViewerStyle}">
                    <StackPanel x:Name="ResultsPanel"/>
                </ScrollViewer>

                <!-- Progress -->
                <StackPanel x:Name="ProgressPanel" Grid.Row="1"
                            VerticalAlignment="Center" HorizontalAlignment="Center" Visibility="Collapsed">
                    <ProgressBar x:Name="ScanProgress" Width="300" Height="4" IsIndeterminate="True"
                                 Foreground="{StaticResource AccentPrimaryBrush}"/>
                    <TextBlock x:Name="ProgressText" Text="Scanning browsers..." FontSize="12"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               HorizontalAlignment="Center" Margin="0,12,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Actions -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
            <Button x:Name="BtnScan" Content="Scan Browsers"
                    Style="{StaticResource PrimaryButtonStyle}"
                    Click="BtnScan_Click" Width="140"/>
            <Button x:Name="BtnRemoveThreats" Content="Remove Threats"
                    Style="{StaticResource DangerButtonStyle}"
                    Click="BtnRemoveThreats_Click" Width="140" Margin="12,0,0,0"
                    IsEnabled="False"/>
        </StackPanel>
    </Grid>
</Page>
