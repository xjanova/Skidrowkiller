<Page x:Class="SkidrowKiller.Views.MonitorView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      Title="Monitor">

    <Page.Resources>
        <!-- Pulse Animation for Status -->
        <Storyboard x:Key="PulseAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="1" To="0.4" Duration="0:0:1"
                           AutoReverse="True"/>
        </Storyboard>

        <!-- Scan Line Animation -->
        <Storyboard x:Key="ScanLineAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetProperty="(TranslateTransform.Y)"
                           From="-100" To="300" Duration="0:0:2"/>
        </Storyboard>

        <!-- Rotating Shield Animation -->
        <Storyboard x:Key="ShieldGlowAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="0.3" To="0.8" Duration="0:0:2"
                           AutoReverse="True"/>
        </Storyboard>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Main Content -->
        <Grid Grid.Row="0" Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <StackPanel Grid.Row="0" Margin="0,0,0,20">
                <TextBlock Text="Real-time Protection"
                           Style="{StaticResource HeaderTextStyle}"
                           Margin="0,0,0,8"/>
                <TextBlock Text="Advanced threat detection with real-time monitoring"
                           Style="{StaticResource BodyTextStyle}"/>
            </StackPanel>

            <!-- Main Status Card with Animation -->
            <Border Grid.Row="1" Style="{StaticResource GlassCardStyle}" Margin="0,0,0,16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Animated Shield Icon -->
                    <Grid Grid.Column="0" Width="100" Height="100" Margin="0,0,24,0">
                        <!-- Glow Effect Behind Shield -->
                        <Ellipse x:Name="ShieldGlow" Width="90" Height="90" Opacity="0.3">
                            <Ellipse.Fill>
                                <RadialGradientBrush>
                                    <GradientStop Color="#4066bb6a" Offset="0"/>
                                    <GradientStop Color="#00000000" Offset="1"/>
                                </RadialGradientBrush>
                            </Ellipse.Fill>
                        </Ellipse>

                        <!-- Rotating Ring -->
                        <Ellipse x:Name="ScanRing" Width="85" Height="85" StrokeThickness="2"
                                 StrokeDashArray="4,2" Opacity="0.5">
                            <Ellipse.Stroke>
                                <LinearGradientBrush>
                                    <GradientStop Color="#29b6f6" Offset="0"/>
                                    <GradientStop Color="#66bb6a" Offset="1"/>
                                </LinearGradientBrush>
                            </Ellipse.Stroke>
                            <Ellipse.RenderTransform>
                                <RotateTransform x:Name="RingRotation" CenterX="42.5" CenterY="42.5"/>
                            </Ellipse.RenderTransform>
                        </Ellipse>

                        <!-- Shield Icon -->
                        <Path x:Name="ShieldIcon" Width="50" Height="50" Stretch="Uniform"
                              HorizontalAlignment="Center" VerticalAlignment="Center"
                              Data="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M17.13,17C15.92,18.85 14.11,20.24 12,20.92C9.89,20.24 8.08,18.85 6.87,17C6.53,16.5 6.24,16 6,15.47C6,13.82 8.71,12.47 12,12.47C15.29,12.47 18,13.79 18,15.47C17.76,16 17.47,16.5 17.13,17Z">
                            <Path.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#66bb6a" Offset="0"/>
                                    <GradientStop Color="#29b6f6" Offset="1"/>
                                </LinearGradientBrush>
                            </Path.Fill>
                        </Path>

                        <!-- Scan Line Animation -->
                        <Rectangle x:Name="ScanLine" Width="80" Height="3" Opacity="0"
                                   HorizontalAlignment="Center" VerticalAlignment="Top"
                                   RadiusX="1.5" RadiusY="1.5">
                            <Rectangle.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#00ffffff" Offset="0"/>
                                    <GradientStop Color="#8029b6f6" Offset="0.5"/>
                                    <GradientStop Color="#00ffffff" Offset="1"/>
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                            <Rectangle.RenderTransform>
                                <TranslateTransform x:Name="ScanLineTransform"/>
                            </Rectangle.RenderTransform>
                        </Rectangle>
                    </Grid>

                    <!-- Status Info -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <StackPanel Orientation="Horizontal">
                            <Ellipse x:Name="StatusIndicator"
                                     Width="12" Height="12"
                                     Fill="{StaticResource TextTertiaryBrush}"
                                     Margin="0,0,10,0"/>
                            <TextBlock x:Name="StatusLabel"
                                       Text="Initializing..."
                                       FontSize="22"
                                       FontWeight="Bold"
                                       Foreground="{StaticResource TextTertiaryBrush}"/>
                        </StackPanel>

                        <TextBlock x:Name="StatusDescription"
                                   Text="Starting protection services..."
                                   Style="{StaticResource BodyTextStyle}"
                                   Margin="22,8,0,0"
                                   Opacity="0.8"/>

                        <!-- Stats Row -->
                        <StackPanel Orientation="Horizontal" Margin="22,16,0,0">
                            <Border Background="#15ffffff" CornerRadius="6" Padding="12,6" Margin="0,0,12,0">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Alerts: " Style="{StaticResource BodyTextStyle}" Opacity="0.7"/>
                                    <TextBlock x:Name="AlertCountLabel" Text="0" FontWeight="Bold"
                                               Foreground="{StaticResource CyanPrimaryBrush}"/>
                                </StackPanel>
                            </Border>
                            <Border Background="#15ffffff" CornerRadius="6" Padding="12,6" Margin="0,0,12,0">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Scanned: " Style="{StaticResource BodyTextStyle}" Opacity="0.7"/>
                                    <TextBlock x:Name="ScannedCountLabel" Text="0" FontWeight="Bold"
                                               Foreground="{StaticResource GreenPrimaryBrush}"/>
                                </StackPanel>
                            </Border>
                            <Border Background="#15ffffff" CornerRadius="6" Padding="12,6">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Blocked: " Style="{StaticResource BodyTextStyle}" Opacity="0.7"/>
                                    <TextBlock x:Name="BlockedCountLabel" Text="0" FontWeight="Bold"
                                               Foreground="{StaticResource DangerBrush}"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </StackPanel>

                    <!-- Toggle Button -->
                    <StackPanel Grid.Column="2" VerticalAlignment="Center" Margin="16,0,0,0">
                        <Button x:Name="ToggleButton"
                                Content="..."
                                MinWidth="140"
                                Padding="20,12"
                                Click="ToggleButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Live Stats Cards -->
            <Grid Grid.Row="2" Margin="0,0,0,16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Processes Card -->
                <Border Grid.Column="0" Background="#10ffffff" CornerRadius="10" Padding="16" Margin="0,0,8,0">
                    <StackPanel>
                        <TextBlock Text="PROCESSES" FontSize="10" Foreground="{StaticResource TextTertiaryBrush}" Margin="0,0,0,8"/>
                        <TextBlock x:Name="ProcessCountLabel" Text="0" FontSize="28" FontWeight="Bold"
                                   Foreground="{StaticResource CyanPrimaryBrush}"/>
                        <TextBlock Text="monitored" Style="{StaticResource BodyTextStyle}" Opacity="0.6" FontSize="11"/>
                        <!-- Mini Graph -->
                        <Canvas x:Name="ProcessGraph" Height="30" Margin="0,8,0,0" ClipToBounds="True">
                            <Polyline x:Name="ProcessGraphLine" Stroke="#4029b6f6" StrokeThickness="2"
                                      Points="0,25 10,20 20,22 30,15 40,18 50,10 60,12 70,8"/>
                            <Polyline Stroke="#2029b6f6" StrokeThickness="1"
                                      Points="0,25 10,20 20,22 30,15 40,18 50,10 60,12 70,8 70,30 0,30" Fill="#1029b6f6"/>
                        </Canvas>
                    </StackPanel>
                </Border>

                <!-- Network Card -->
                <Border Grid.Column="1" Background="#10ffffff" CornerRadius="10" Padding="16" Margin="4,0">
                    <StackPanel>
                        <TextBlock Text="NETWORK" FontSize="10" Foreground="{StaticResource TextTertiaryBrush}" Margin="0,0,0,8"/>
                        <TextBlock x:Name="NetworkCountLabel" Text="0" FontSize="28" FontWeight="Bold"
                                   Foreground="{StaticResource GreenPrimaryBrush}"/>
                        <TextBlock Text="connections" Style="{StaticResource BodyTextStyle}" Opacity="0.6" FontSize="11"/>
                        <Canvas x:Name="NetworkGraph" Height="30" Margin="0,8,0,0" ClipToBounds="True">
                            <Polyline x:Name="NetworkGraphLine" Stroke="#4066bb6a" StrokeThickness="2"
                                      Points="0,25 10,25 20,25 30,25 40,25 50,25 60,25 70,25"/>
                            <Polyline x:Name="NetworkGraphFill" Stroke="#2066bb6a" StrokeThickness="1"
                                      Points="0,25 10,25 20,25 30,25 40,25 50,25 60,25 70,25 70,30 0,30" Fill="#1066bb6a"/>
                        </Canvas>
                    </StackPanel>
                </Border>

                <!-- Files Card -->
                <Border Grid.Column="2" Background="#10ffffff" CornerRadius="10" Padding="16" Margin="4,0">
                    <StackPanel>
                        <TextBlock Text="FILES" FontSize="10" Foreground="{StaticResource TextTertiaryBrush}" Margin="0,0,0,8"/>
                        <TextBlock x:Name="FileCountLabel" Text="0" FontSize="28" FontWeight="Bold"
                                   Foreground="{StaticResource WarningBrush}"/>
                        <TextBlock Text="watched" Style="{StaticResource BodyTextStyle}" Opacity="0.6" FontSize="11"/>
                        <Canvas x:Name="FileGraph" Height="30" Margin="0,8,0,0" ClipToBounds="True">
                            <Polyline x:Name="FileGraphLine" Stroke="#40ffb74d" StrokeThickness="2"
                                      Points="0,25 10,25 20,25 30,25 40,25 50,25 60,25 70,25"/>
                            <Polyline x:Name="FileGraphFill" Stroke="#20ffb74d" StrokeThickness="1"
                                      Points="0,25 10,25 20,25 30,25 40,25 50,25 60,25 70,25 70,30 0,30" Fill="#10ffb74d"/>
                        </Canvas>
                    </StackPanel>
                </Border>

                <!-- Registry Card -->
                <Border Grid.Column="3" Background="#10ffffff" CornerRadius="10" Padding="16" Margin="8,0,0,0">
                    <StackPanel>
                        <TextBlock Text="REGISTRY" FontSize="10" Foreground="{StaticResource TextTertiaryBrush}" Margin="0,0,0,8"/>
                        <TextBlock x:Name="RegistryCountLabel" Text="0" FontSize="28" FontWeight="Bold"
                                   Foreground="{StaticResource AccentSecondaryBrush}"/>
                        <TextBlock Text="keys checked" Style="{StaticResource BodyTextStyle}" Opacity="0.6" FontSize="11"/>
                        <Canvas x:Name="RegistryGraph" Height="30" Margin="0,8,0,0" ClipToBounds="True">
                            <Polyline x:Name="RegistryGraphLine" Stroke="#40ba68c8" StrokeThickness="2"
                                      Points="0,25 10,25 20,25 30,25 40,25 50,25 60,25 70,25"/>
                            <Polyline x:Name="RegistryGraphFill" Stroke="#20ba68c8" StrokeThickness="1"
                                      Points="0,25 10,25 20,25 30,25 40,25 50,25 60,25 70,25 70,30 0,30" Fill="#10ba68c8"/>
                        </Canvas>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Activity Log -->
            <Border Grid.Row="3" Style="{StaticResource GlassCardStyle}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0" Margin="0,0,0,12">
                        <StackPanel Orientation="Horizontal">
                            <Ellipse x:Name="LogIndicator" Width="8" Height="8" Fill="{StaticResource GreenPrimaryBrush}" Margin="0,0,8,0"/>
                            <TextBlock Text="Live Activity Log"
                                       Style="{StaticResource SubHeaderTextStyle}"/>
                        </StackPanel>
                        <Button Content="Clear Log"
                                Style="{StaticResource NavButtonStyle}"
                                Padding="12,6"
                                HorizontalAlignment="Right"
                                Click="ClearLog_Click"/>
                    </Grid>

                    <TextBox Grid.Row="1"
                             x:Name="LogTextBox"
                             Style="{StaticResource LogTextBoxStyle}"
                             VerticalScrollBarVisibility="Auto"/>
                </Grid>
            </Border>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="1" Background="#15000000" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,1,0,0">
            <Grid Margin="16,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Protection Status -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Ellipse x:Name="StatusBarIndicator" Width="8" Height="8" Fill="{StaticResource GreenPrimaryBrush}" Margin="0,0,8,0"/>
                    <TextBlock x:Name="StatusBarText" Text="Protection Active" FontSize="11"
                               Foreground="{StaticResource TextSecondaryBrush}"/>
                </StackPanel>

                <!-- Spacer with activity indicator -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock x:Name="ActivityText" Text="" FontSize="11"
                               Foreground="{StaticResource TextTertiaryBrush}" Opacity="0.7"/>
                </StackPanel>

                <!-- CPU Usage -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="16,0">
                    <TextBlock Text="CPU: " FontSize="11" Foreground="{StaticResource TextTertiaryBrush}"/>
                    <TextBlock x:Name="CpuLabel" Text="0%" FontSize="11" Foreground="{StaticResource CyanPrimaryBrush}"/>
                </StackPanel>

                <!-- Memory Usage -->
                <StackPanel Grid.Column="3" Orientation="Horizontal" Margin="16,0">
                    <TextBlock Text="Memory: " FontSize="11" Foreground="{StaticResource TextTertiaryBrush}"/>
                    <TextBlock x:Name="MemoryLabel" Text="0 MB" FontSize="11" Foreground="{StaticResource GreenPrimaryBrush}"/>
                </StackPanel>

                <!-- Last Update -->
                <StackPanel Grid.Column="4" Orientation="Horizontal" Margin="16,0,0,0">
                    <TextBlock Text="Updated: " FontSize="11" Foreground="{StaticResource TextTertiaryBrush}"/>
                    <TextBlock x:Name="LastUpdateLabel" Text="--:--:--" FontSize="11" Foreground="{StaticResource TextSecondaryBrush}"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>
