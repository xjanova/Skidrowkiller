<Page x:Class="SkidrowKiller.Views.SettingsView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      Title="Settings">

    <Page.Resources>
        <!-- Toggle Switch Style -->
        <Style x:Key="ToggleSwitchStyle" TargetType="CheckBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Grid>
                            <Border x:Name="Track" Width="44" Height="24" CornerRadius="12"
                                    Background="{StaticResource BgTertiaryBrush}"
                                    BorderBrush="{StaticResource BorderBrush}" BorderThickness="1"
                                    HorizontalAlignment="Left"/>
                            <Border x:Name="Thumb" Width="18" Height="18" CornerRadius="9"
                                    Background="{StaticResource TextSecondaryBrush}"
                                    HorizontalAlignment="Left" Margin="3,0,0,0">
                                <Border.RenderTransform>
                                    <TranslateTransform x:Name="ThumbTransform"/>
                                </Border.RenderTransform>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Track" Property="Background" Value="{StaticResource AccentPrimaryBrush}"/>
                                <Setter TargetName="Thumb" Property="Background" Value="White"/>
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="ThumbTransform" Storyboard.TargetProperty="X" To="20" Duration="0:0:0.15"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="ThumbTransform" Storyboard.TargetProperty="X" To="0" Duration="0:0:0.15"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Settings Card Style -->
        <Style x:Key="SettingsCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource CardGradientBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>

        <!-- Setting Row Style -->
        <Style x:Key="SettingRowStyle" TargetType="Grid">
            <Setter Property="Margin" Value="0,8"/>
        </Style>
    </Page.Resources>

    <ScrollViewer x:Name="MainScrollViewer"
                  VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Disabled"
                  Background="#01000000"
                  Focusable="False"
                  CanContentScroll="False">
        <StackPanel MaxWidth="800" Margin="24" Background="Transparent">
            <!-- Header -->
            <TextBlock Text="Settings" Style="{StaticResource HeaderTextStyle}" FontSize="28" Margin="0,0,0,8"/>
            <TextBlock Text="Configure Skidrow Killer preferences" Style="{StaticResource BodyTextStyle}" Margin="0,0,0,24"/>

            <!-- General Section -->
            <TextBlock Text="GENERAL" Style="{StaticResource SubHeaderTextStyle}" FontSize="12"
                       Foreground="{StaticResource AccentPrimaryBrush}" Margin="0,0,0,12"/>
            <Border Style="{StaticResource SettingsCardStyle}">
                <StackPanel>
                    <!-- Start with Windows -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Start with Windows" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Launch Skidrow Killer when Windows starts" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkStartWithWindows" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Start Minimized -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Start minimized to tray" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Start in system tray instead of showing window" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkStartMinimized" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Check for Updates -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Check for updates on startup" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Automatically check for new versions" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkCheckUpdates" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" IsChecked="True" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Real-time Protection Section -->
            <TextBlock Text="REAL-TIME PROTECTION" Style="{StaticResource SubHeaderTextStyle}" FontSize="12"
                       Foreground="{StaticResource SuccessBrush}" Margin="0,12,0,12"/>
            <Border Style="{StaticResource SettingsCardStyle}">
                <StackPanel>
                    <!-- Enable Real-time Protection -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Enable real-time protection" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Monitor system for new threats automatically" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkRealtimeProtection" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" IsChecked="True" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Monitor New Processes -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Monitor new processes" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Scan newly started processes for threats" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkMonitorProcesses" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" IsChecked="True" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Monitor Network -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Monitor network connections" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Detect suspicious network activity" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkMonitorNetwork" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" IsChecked="True" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Show Notifications -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Show threat notifications" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Display alerts when threats are detected" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkShowNotifications" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" IsChecked="True" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Scanning Section -->
            <TextBlock Text="SCANNING" Style="{StaticResource SubHeaderTextStyle}" FontSize="12"
                       Foreground="{StaticResource CyanPrimaryBrush}" Margin="0,12,0,12"/>
            <Border Style="{StaticResource SettingsCardStyle}">
                <StackPanel>
                    <!-- Scan Files -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Scan files and folders" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Include file system in scans" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkScanFiles" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" IsChecked="True" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Scan Registry -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Scan Windows Registry" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Check registry for malicious entries" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkScanRegistry" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" IsChecked="True" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Scan Processes -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Scan running processes" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Analyze active processes and loaded DLLs" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkScanProcesses" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" IsChecked="True" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Scan Network Drives -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Scan network drives" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Include mapped network drives in scans" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkScanNetworkDrives" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Threat Actions Section -->
            <TextBlock Text="THREAT ACTIONS" Style="{StaticResource SubHeaderTextStyle}" FontSize="12"
                       Foreground="{StaticResource DangerBrush}" Margin="0,12,0,12"/>
            <Border Style="{StaticResource SettingsCardStyle}">
                <StackPanel>
                    <!-- Default Action -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="180"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Default threat action" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="What to do when threats are found" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <ComboBox x:Name="CmbThreatAction" Grid.Column="1" VerticalAlignment="Center"
                                  Style="{StaticResource ModernComboBoxStyle}" SelectionChanged="Setting_SelectionChanged">
                            <ComboBoxItem Content="Ask me every time" IsSelected="True"/>
                            <ComboBoxItem Content="Quarantine automatically"/>
                            <ComboBoxItem Content="Delete automatically"/>
                            <ComboBoxItem Content="Ignore (log only)"/>
                        </ComboBox>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Backup Before Delete -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Backup before removal" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Create backup before deleting threats (recommended)" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkBackupBeforeDelete" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" IsChecked="True" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Quarantine Instead of Delete -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Quarantine instead of delete" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Move threats to quarantine folder instead of permanent deletion" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkQuarantineOnly" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" IsChecked="True" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Minimum Score to Report -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="180"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Detection sensitivity" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Minimum threat score to report (higher = fewer false positives)" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <ComboBox x:Name="CmbSensitivity" Grid.Column="1" VerticalAlignment="Center"
                                  Style="{StaticResource ModernComboBoxStyle}" SelectionChanged="Setting_SelectionChanged">
                            <ComboBoxItem Content="Very High (10+)"/>
                            <ComboBoxItem Content="High (20+)" IsSelected="True"/>
                            <ComboBoxItem Content="Medium (40+)"/>
                            <ComboBoxItem Content="Low (60+)"/>
                        </ComboBox>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Backup & Quarantine Section -->
            <TextBlock Text="BACKUP &amp; QUARANTINE" Style="{StaticResource SubHeaderTextStyle}" FontSize="12"
                       Foreground="{StaticResource WarningBrush}" Margin="0,12,0,12"/>
            <Border Style="{StaticResource SettingsCardStyle}">
                <StackPanel>
                    <!-- Backup Retention -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="180"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Backup retention period" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="How long to keep backups before auto-delete" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <ComboBox x:Name="CmbBackupRetention" Grid.Column="1" VerticalAlignment="Center"
                                  Style="{StaticResource ModernComboBoxStyle}" SelectionChanged="Setting_SelectionChanged">
                            <ComboBoxItem Content="3 days"/>
                            <ComboBoxItem Content="7 days" IsSelected="True"/>
                            <ComboBoxItem Content="14 days"/>
                            <ComboBoxItem Content="30 days"/>
                            <ComboBoxItem Content="Never delete"/>
                        </ComboBox>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Max Backup Size -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="180"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Maximum backup size" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Total size limit for backup storage" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <ComboBox x:Name="CmbMaxBackupSize" Grid.Column="1" VerticalAlignment="Center"
                                  Style="{StaticResource ModernComboBoxStyle}" SelectionChanged="Setting_SelectionChanged">
                            <ComboBoxItem Content="500 MB"/>
                            <ComboBoxItem Content="1 GB" IsSelected="True"/>
                            <ComboBoxItem Content="2 GB"/>
                            <ComboBoxItem Content="5 GB"/>
                            <ComboBoxItem Content="Unlimited"/>
                        </ComboBox>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Quarantine Location -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Quarantine location" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock x:Name="TxtQuarantinePath" Text="%LOCALAPPDATA%\SkidrowKiller\Quarantine"
                                       Style="{StaticResource BodyTextStyle}" FontSize="11" Foreground="{StaticResource TextTertiaryBrush}"/>
                        </StackPanel>
                        <Button Content="Open Folder" Style="{StaticResource SecondaryButtonStyle}"
                                Click="OpenQuarantineFolder_Click" VerticalAlignment="Center" Padding="12,6"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Logging Section -->
            <TextBlock Text="LOGGING" Style="{StaticResource SubHeaderTextStyle}" FontSize="12"
                       Foreground="{StaticResource TextSecondaryBrush}" Margin="0,12,0,12"/>
            <Border Style="{StaticResource SettingsCardStyle}">
                <StackPanel>
                    <!-- Enable Logging -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Enable file logging" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Save scan results and events to log files" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkEnableLogging" Grid.Column="1" Style="{StaticResource ToggleSwitchStyle}"
                                  VerticalAlignment="Center" IsChecked="True" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Log Level -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="180"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Log detail level" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Amount of detail to include in logs" Style="{StaticResource BodyTextStyle}" FontSize="12"/>
                        </StackPanel>
                        <ComboBox x:Name="CmbLogLevel" Grid.Column="1" VerticalAlignment="Center"
                                  Style="{StaticResource ModernComboBoxStyle}" SelectionChanged="Setting_SelectionChanged">
                            <ComboBoxItem Content="Errors only"/>
                            <ComboBoxItem Content="Warnings and errors"/>
                            <ComboBoxItem Content="Normal" IsSelected="True"/>
                            <ComboBoxItem Content="Detailed"/>
                            <ComboBoxItem Content="Debug (verbose)"/>
                        </ComboBox>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Margin="0,8"/>

                    <!-- Log Location -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Log files location" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock x:Name="TxtLogPath" Text="%LOCALAPPDATA%\SkidrowKiller\Logs"
                                       Style="{StaticResource BodyTextStyle}" FontSize="11" Foreground="{StaticResource TextTertiaryBrush}"/>
                        </StackPanel>
                        <Button Content="Open Folder" Style="{StaticResource SecondaryButtonStyle}"
                                Click="OpenLogFolder_Click" VerticalAlignment="Center" Padding="12,6"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Database & Updates Section -->
            <TextBlock Text="DATABASE &amp; UPDATES" Style="{StaticResource SubHeaderTextStyle}" FontSize="12"
                       Foreground="{StaticResource AccentPrimaryBrush}" Margin="0,12,0,12"/>
            <Border Style="{StaticResource SettingsCardStyle}">
                <StackPanel>
                    <!-- Virus Database Info -->
                    <Grid Margin="0,0,0,16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Database Icon -->
                        <Border Grid.Column="0" Width="48" Height="48" CornerRadius="8"
                                Background="{StaticResource AccentGradientBrush}" Margin="0,0,16,0">
                            <Path Width="24" Height="24" Stretch="Uniform" Fill="White"
                                  HorizontalAlignment="Center" VerticalAlignment="Center"
                                  Data="M12,3C7.58,3 4,4.79 4,7V17C4,19.21 7.59,21 12,21C16.41,21 20,19.21 20,17V7C20,4.79 16.42,3 12,3M18,17C18,17.5 15.87,19 12,19C8.13,19 6,17.5 6,17V14.77C7.61,15.55 9.72,16 12,16C14.28,16 16.39,15.55 18,14.77V17M18,12.45C16.7,13.4 14.42,14 12,14C9.58,14 7.3,13.4 6,12.45V9.64C7.47,10.47 9.61,11 12,11C14.39,11 16.53,10.47 18,9.64V12.45M12,9C8.13,9 6,7.5 6,7C6,6.5 8.13,5 12,5C15.87,5 18,6.5 18,7C18,7.5 15.87,9 12,9Z"/>
                        </Border>

                        <!-- Database Info -->
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <TextBlock Text="Virus Definition Database" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                <TextBlock Text="Version: " Style="{StaticResource BodyTextStyle}" Opacity="0.7"/>
                                <TextBlock x:Name="TxtDbVersion" Text="2026.01.08.001" Style="{StaticResource BodyTextStyle}"
                                           Foreground="{StaticResource CyanPrimaryBrush}" FontWeight="SemiBold"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                <TextBlock Text="Last Updated: " Style="{StaticResource BodyTextStyle}" Opacity="0.7"/>
                                <TextBlock x:Name="TxtDbLastUpdate" Text="Today at 12:00" Style="{StaticResource BodyTextStyle}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                <TextBlock Text="Signatures: " Style="{StaticResource BodyTextStyle}" Opacity="0.7"/>
                                <TextBlock x:Name="TxtDbSignatures" Text="125,847" Style="{StaticResource BodyTextStyle}"
                                           Foreground="{StaticResource GreenPrimaryBrush}"/>
                            </StackPanel>
                        </StackPanel>

                        <!-- Update Button -->
                        <Button x:Name="BtnUpdateDatabase" Grid.Column="2" Style="{StaticResource SuccessButtonStyle}"
                                Click="UpdateDatabase_Click" Padding="16,10" VerticalAlignment="Center">
                            <StackPanel Orientation="Horizontal">
                                <Path Width="16" Height="16" Stretch="Uniform" Fill="White" Margin="0,0,8,0"
                                      Data="M17.65,6.35C16.2,4.9 14.21,4 12,4C7.58,4 4.01,7.58 4.01,12C4.01,16.42 7.58,20 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18C8.69,18 6,15.31 6,12C6,8.69 8.69,6 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                                <TextBlock Text="Update Now"/>
                            </StackPanel>
                        </Button>
                    </Grid>

                    <Separator Background="{StaticResource BorderBrush}" Height="1" Margin="0,0,0,16"/>

                    <!-- Auto Update Settings -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Auto-update database" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="Automatically download latest virus definitions"
                                       Style="{StaticResource BodyTextStyle}" Foreground="{StaticResource TextTertiaryBrush}"/>
                        </StackPanel>
                        <CheckBox x:Name="ChkAutoUpdateDb" Style="{StaticResource ToggleSwitchStyle}"
                                  IsChecked="True" VerticalAlignment="Center" Checked="Setting_Changed" Unchecked="Setting_Changed"/>
                    </Grid>

                    <!-- Update Frequency -->
                    <Grid Style="{StaticResource SettingRowStyle}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="150"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock Text="Update frequency" Style="{StaticResource SubHeaderTextStyle}" FontSize="14"/>
                            <TextBlock Text="How often to check for database updates"
                                       Style="{StaticResource BodyTextStyle}" Foreground="{StaticResource TextTertiaryBrush}"/>
                        </StackPanel>
                        <ComboBox x:Name="CmbUpdateFrequency" Style="{StaticResource ModernComboBoxStyle}"
                                  VerticalAlignment="Center" SelectionChanged="Setting_SelectionChanged">
                            <ComboBoxItem Content="Every hour"/>
                            <ComboBoxItem Content="Every 6 hours" IsSelected="True"/>
                            <ComboBoxItem Content="Every 12 hours"/>
                            <ComboBoxItem Content="Daily"/>
                        </ComboBox>
                    </Grid>

                    <!-- Database Status -->
                    <Border Background="#1029b6f6" CornerRadius="8" Padding="12" Margin="0,8,0,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Path x:Name="DbStatusIcon" Width="20" Height="20" Stretch="Uniform" Margin="0,0,12,0"
                                  Fill="{StaticResource GreenPrimaryBrush}"
                                  Data="M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M10,17L5,12L6.41,10.59L10,14.17L17.59,6.58L19,8L10,17Z"/>
                            <TextBlock x:Name="TxtDbStatus" Grid.Column="1" Text="Database is up to date"
                                       Style="{StaticResource BodyTextStyle}" VerticalAlignment="Center"
                                       Foreground="{StaticResource GreenPrimaryBrush}"/>
                        </Grid>
                    </Border>
                </StackPanel>
            </Border>

            <!-- About Section -->
            <TextBlock Text="ABOUT" Style="{StaticResource SubHeaderTextStyle}" FontSize="12"
                       Foreground="{StaticResource TextSecondaryBrush}" Margin="0,12,0,12"/>
            <Border Style="{StaticResource SettingsCardStyle}">
                <StackPanel>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel>
                            <TextBlock x:Name="TxtAppName" Text="Skidrow Killer" Style="{StaticResource HeaderTextStyle}" FontSize="18"/>
                            <TextBlock x:Name="TxtVersion" Text="Version 2.1.0" Style="{StaticResource BodyTextStyle}" Margin="0,4,0,0"/>
                            <TextBlock Text="Advanced Malware Scanner with Smart Detection" Style="{StaticResource BodyTextStyle}"
                                       Foreground="{StaticResource TextTertiaryBrush}" Margin="0,2,0,0"/>
                            <TextBlock Text="Copyright Â© 2024-2026 xman studio" Style="{StaticResource BodyTextStyle}"
                                       Foreground="{StaticResource TextTertiaryBrush}" Margin="0,8,0,0"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <Button Content="Check for Updates" Style="{StaticResource PrimaryButtonStyle}"
                                    Click="CheckForUpdates_Click" Margin="0,0,0,8" Padding="16,8"/>
                            <Button Content="Reset to Defaults" Style="{StaticResource SecondaryButtonStyle}"
                                    Click="ResetDefaults_Click" Padding="16,8"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Save Button -->
            <Grid Margin="0,24,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock x:Name="TxtSaveStatus" Style="{StaticResource BodyTextStyle}" VerticalAlignment="Center"
                           Foreground="{StaticResource SuccessBrush}"/>
                <Button x:Name="BtnSave" Content="Save Settings" Grid.Column="1" Style="{StaticResource PrimaryButtonStyle}"
                        Click="SaveSettings_Click" Padding="24,12"/>
            </Grid>

            <Separator Height="50" Background="Transparent"/>
        </StackPanel>
    </ScrollViewer>
</Page>
